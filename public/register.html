<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register | Bloomfield Hall Science Society</title>
    <link
      rel="icon"
      href="https://cdn.glitch.global/87942ebb-4f4c-494c-ae2d-2ce4d0b6cefb/logo.png?v=1747136438719"
      type="image/png"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Roboto&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      /* Form-specific styles */
      /* Phone Input Styling */
      .phone-input-group {
        display: flex;
        gap: 10px;
      }

      .country-code-container {
        position: relative;
        width: 200px;
      }

      .country-code-input {
        width: 100%;
        padding-right: 30px;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 1em;
      }

      .phone-number-input {
        flex: 1;
      }

      .light-mode .country-code-input {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      }

      /* For mobile responsiveness */
      @media (max-width: 768px) {
        .phone-input-group {
          flex-direction: column;
        }
        
        .country-code-container {
          width: 100%;
        }
      }
      .country-code-input.invalid {
        border-color: #ff4444;
        animation: shake 0.5s;
      }

      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20%, 60% { transform: translateX(-5px); }
        40%, 80% { transform: translateX(5px); }
      }
      .phone-input-group select {
        border-radius: 8px 0 0 8px !important;
        border-right: none !important;
      }

      .phone-input-group input {
        border-radius: 0 8px 8px 0 !important;
      }

      /* Country code dropdown styling */
      #countryCode {
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 1em;
        padding-right: 30px;
      }

      .light-mode #countryCode {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      }
      .registration-container {
        max-width: 900px;
        margin: 100px auto 50px;
        padding: 30px;
        background-color: #1b1e2f;
        border-radius: 16px;
        box-shadow: 0 8px 20px rgba(0, 255, 174, 0.15);
      }

      .form-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .form-header h2 {
        color: #00ffae;
        font-size: 2rem;
        margin-bottom: 10px;
      }

      .form-progress {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
        position: relative;
      }

      .progress-step {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #2d3246;
        color: #ffffff;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 2;
        border: 3px solid #2d3246;
      }

      .progress-step.active {
        background-color: #00ffae;
        color: #0f111a;
        border-color: #00ffae;
      }

      .progress-step.completed {
        background-color: #2e8b57;
        border-color: #2e8b57;
      }

      .progress-bar {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 4px;
        background-color: #2d3246;
        transform: translateY(-50%);
        z-index: 1;
      }

      .progress-fill {
        height: 100%;
        background-color: #00ffae;
        width: 0%;
        transition: width 0.3s ease;
      }

      .form-section {
        display: none;
      }

      .form-section.active {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #ffffff;
        font-weight: 600;
      }

      .form-control {
        width: 100%;
        padding: 12px 15px;
        background-color: #2d3246;
        border: 2px solid #3a4058;
        border-radius: 8px;
        color: #ffffff;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-control:focus {
        border-color: #00ffae;
        outline: none;
        box-shadow: 0 0 0 3px rgba(0, 255, 174, 0.2);
      }

      .radio-group {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
      }

      .checkbox-group {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .form-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 30px;
      }

      .btn {
        padding: 12px 25px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
      }

      .btn-prev {
        background-color: #3a4058;
        color: white;
      }

      .btn-next,
      .btn-submit {
        background-color: #00ffae;
        color: #0f111a;
      }

      .btn-prev:hover {
        background-color: #4a526f;
      }

      .btn-next:hover,
      .btn-submit:hover {
        background-color: #7bd859;
      }

      .success-message {
        text-align: center;
        padding: 40px;
        display: none;
      }

      .success-message i {
        font-size: 4rem;
        color: #00ffae;
        margin-bottom: 20px;
      }

      .success-message h3 {
        font-size: 1.8rem;
        margin-bottom: 15px;
        color: #00ffae;
      }

      /* Enhanced Radio Buttons & Checkboxes */
      .radio-option,
      .checkbox-option {
        position: relative;
        padding-left: 32px;
        cursor: pointer;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        min-height: 24px;
      }

      .radio-option input,
      .checkbox-option input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
      }

      .radio-custom {
        position: absolute;
        top: 0;
        left: 0;
        height: 22px;
        width: 22px;
        background-color: #2d3246;
        border-radius: 50%;
        border: 2px solid #3a4058;
        transition: all 0.3s ease;
      }

      .checkbox-custom {
        position: absolute;
        top: 0;
        left: 0;
        height: 22px;
        width: 22px;
        background-color: #2d3246;
        border: 2px solid #3a4058;
        border-radius: 4px;
        transition: all 0.3s ease;
      }

      .radio-option:hover .radio-custom,
      .checkbox-option:hover .checkbox-custom {
        border-color: #00ffae;
        box-shadow: 0 0 0 3px rgba(0, 255, 174, 0.1);
      }

      .radio-option input:checked ~ .radio-custom,
      .checkbox-option input:checked ~ .checkbox-custom {
        background-color: #00ffae;
        border-color: #00ffae;
      }

      .radio-custom:after {
        content: "";
        position: absolute;
        display: none;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #0f111a;
      }

      .checkbox-custom:after {
        content: "";
        position: absolute;
        display: none;
        left: 6px;
        top: 2px;
        width: 5px;
        height: 10px;
        border: solid #0f111a;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
      }

      .radio-option input:checked ~ .radio-custom:after,
      .checkbox-option input:checked ~ .checkbox-custom:after {
        display: block;
      }

      /* Light Mode Styles */
      .light-mode .registration-container {
        background-color: #ffffff;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }

      .light-mode .form-group label {
        color: #333333;
      }

      .light-mode .form-control {
        background-color: #f5f5f5;
        border-color: #dddddd;
        color: #333333;
      }

      .light-mode .form-control:focus {
        border-color: #2e8b57;
        box-shadow: 0 0 0 3px rgba(46, 139, 87, 0.2);
      }

      .light-mode .progress-step {
        background-color: #dddddd;
        color: #333333;
      }

      .light-mode .progress-bar {
        background-color: #dddddd;
      }

      .light-mode .btn-prev {
        background-color: #dddddd;
        color: #333333;
      }

      .light-mode .radio-custom,
      .light-mode .checkbox-custom {
        background-color: #f5f5f5;
        border-color: #dddddd;
      }

      .light-mode .radio-option:hover .radio-custom,
      .light-mode .checkbox-option:hover .checkbox-custom {
        border-color: #2e8b57;
        box-shadow: 0 0 0 3px rgba(46, 139, 87, 0.1);
      }

      .light-mode .radio-option input:checked ~ .radio-custom,
      .light-mode .checkbox-option input:checked ~ .checkbox-custom {
        background-color: #2e8b57;
        border-color: #2e8b57;
      }

      .light-mode .radio-custom:after {
        background: #ffffff;
      }

      .light-mode .checkbox-custom:after {
        border-color: #ffffff;
      }

      /* Notification System */
      .notification-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        max-width: 350px;
      }

      .notification {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        margin-bottom: 15px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        color: white;
        transform: translateX(150%);
        transition: transform 0.3s ease;
        background-color: #ff4444;
        border-left: 5px solid #cc0000;
      }

      .notification.show {
        transform: translateX(0);
      }

      .notification i {
        margin-right: 15px;
        font-size: 1.5rem;
      }

      .notification-content {
        flex: 1;
      }

      .notification-title {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .notification-close {
        background: none;
        border: none;
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        margin-left: 10px;
        opacity: 0.7;
        transition: opacity 0.2s;
      }

      .notification-close:hover {
        opacity: 1;
      }

      /* Light mode notification */
      .light-mode .notification {
        background-color: #ff6b6b;
        border-left-color: #ff4444;
      }

      @media (max-width: 768px) {
        .registration-container {
          margin: 80px 20px 30px;
          padding: 20px;
        }

        .checkbox-group {
          grid-template-columns: 1fr;
        }
        
        .notification-container {
          max-width: 90%;
          left: 5%;
          right: 5%;
          top: 10px;
        }
      }
    </style>
  </head>

  <body class="dark">
    <header>
      <nav class="navbar">
        <div class="logo-container">
          <img
            src="https://cdn.glitch.global/87942ebb-4f4c-494c-ae2d-2ce4d0b6cefb/logo.png?v=1747136438719"
            alt="BHSS Logo"
            class="logo"
          />
          <span class="title">BHS Science Society</span>
        </div>

        <div class="nav-center-container">
          <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="index.html#research">Research</a></li>
            <li><a href="events.html">Events</a></li>
            <li><a href="register.html" class="active">Register</a></li>
            <li><a href="index.html#contact">Contact</a></li>
          </ul>
        </div>

        <button id="theme-toggle" aria-label="Toggle dark/light mode">
          <i class="fas fa-moon"></i>
        </button>

        <button class="hamburger" id="hamburger-btn" aria-label="Menu">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
      </nav>
    </header>

    <main class="registration-container">
      <!-- Form Progress Indicator -->
      <div class="form-progress">
        <div class="progress-step active" id="step1">1</div>
        <div class="progress-step" id="step2">2</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <!-- Form Sections -->
      <form
        id="registrationForm"
        action="https://formsubmit.co/233ae018a57690b5f87d0597fd6cdc65"
        method="POST"
      >
        <input type="hidden" name="_subject" value="New BHSS Registration" />
        <input type="hidden" name="_template" value="table" />
        <input type="hidden" name="_captcha" value="false" />
        <input
          type="hidden"
          name="_next"
          value="https://polyester-veil-currant.glitch.me/thank-you.html"
        />

        <!-- Section 1: Basic Information -->
        <div class="form-section active" id="section1">
          <div class="form-header">
            <h2>Basic Information</h2>
            <p>Please provide your personal details</p>
          </div>

          <div class="form-group">
            <label for="fullName">Full Name</label>
            <input
              type="text"
              id="fullName"
              name="fullName"
              class="form-control"
              required
            />
          </div>

          <div class="form-group">
            <label for="email">Email Address</label>
            <input
              type="email"
              id="email"
              name="email"
              class="form-control"
              required
            />
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <div class="phone-input-group">
              <!-- Country Code Searchable Dropdown -->
              <div class="country-code-container">
                <input 
                  list="countryCodes" 
                  id="countryCode" 
                  name="countryCode" 
                  class="form-control country-code-input"
                  placeholder="Search country..."
                  autocomplete="on"
                  required
                />
                <datalist id="countryCodes">
                  <!-- All country options will go here -->
                </datalist>
              </div>
              <!-- Phone Number Input -->
              <input
                type="tel"
                id="phone"
                name="phone"
                class="form-control phone-number-input"
                required
                placeholder="e.g. 3001234567"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="dob">Date Of Birth</label>
            <input
              type="date"
              id="dob"
              name="dob"
              class="form-control"
              required
            />
          </div>

          <div class="form-group">
            <label for="grade">Grade/Year</label>
            <input
              type="text"
              id="grade"
              name="grade"
              class="form-control"
              required
            />
          </div>

          <div class="form-group">
            <label>Are you from Bloomfield Hall Peshawar?</label>
            <div class="radio-group">
              <label class="radio-option">
                <input
                  type="radio"
                  id="bhYes"
                  name="isBhStudent"
                  value="yes"
                  required
                />
                <span class="radio-custom"></span>
                <span class="radio-label">Yes</span>
              </label>
              <label class="radio-option">
                <input
                  type="radio"
                  id="bhNo"
                  name="isBhStudent"
                  value="no"
                  required
                />
                <span class="radio-custom"></span>
                <span class="radio-label">No</span>
              </label>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-next" id="nextBtn1">
              Next
            </button>
          </div>
        </div>

        <!-- Section 2: Society Details -->
        <div class="form-section" id="section2">
          <div class="form-header">
            <h2>Society Details</h2>
            <p>Tell us about your interests and motivation</p>
          </div>

          <div id="bhStudentDetails">
            <!-- For BH students -->
            <div id="bhStudentFields" style="display: none">
              <div class="form-group">
                <label for="section">Your Section</label>
                <input
                  type="text"
                  id="section"
                  name="section"
                  class="form-control"
                />
              </div>
            </div>

            <!-- For non-BH students -->
            <div id="nonBhStudentFields" style="display: none">
              <div class="form-group">
                <label for="country">Country</label>
                <input
                  type="text"
                  id="country"
                  name="country"
                  class="form-control"
                />
              </div>

              <div class="form-group">
                <label for="school">School Name</label>
                <input
                  type="text"
                  id="school"
                  name="school"
                  class="form-control"
                />
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Subjects of Interest (Select all that apply)</label>
            <div class="checkbox-group">
              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="physics"
                  name="subjects[]"
                  value="Physics"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Physics</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="chemistry"
                  name="subjects[]"
                  value="Chemistry"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Chemistry</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="biology"
                  name="subjects[]"
                  value="Biology"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Biology</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="math"
                  name="subjects[]"
                  value="Mathematics"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Mathematics</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="cs"
                  name="subjects[]"
                  value="Computer Science"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Computer Science</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="engineering"
                  name="subjects[]"
                  value="Engineering"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Engineering</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="astronomy"
                  name="subjects[]"
                  value="Astronomy"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Astronomy</span>
              </label>

              <label class="checkbox-option">
                <input
                  type="checkbox"
                  id="other"
                  name="subjects[]"
                  value="Other"
                />
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Other</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label for="motivation"
              >Why do you want to join the society? (Minimum 50 characters)</label
            >
            <textarea
              id="motivation"
              name="motivation"
              class="form-control"
              rows="5"
              required
              minlength="50"
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-prev" id="prevBtn2">
              Previous
            </button>
            <button type="submit" class="btn btn-submit">
              Submit Application
            </button>
          </div>
        </div>
      </form>

      <!-- Success Message (hidden by default) -->
      <div class="success-message" id="successMessage">
        <i class="fa-solid fa-spinner"></i>
        <h3>Submitting the application</h3>
      </div>
    </main>

    <footer class="footer">
      <p>© 2025 Bloomfield Hall Science Society | All Rights Reserved</p>
    </footer>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Form Handling JavaScript
        const form = document.getElementById("registrationForm");
        const section1 = document.getElementById("section1");
        const section2 = document.getElementById("section2");
        const nextBtn1 = document.getElementById("nextBtn1");
        const prevBtn2 = document.getElementById("prevBtn2");
        const bhYes = document.getElementById("bhYes");
        const bhNo = document.getElementById("bhNo");
        const bhStudentFields = document.getElementById("bhStudentFields");
        const nonBhStudentFields = document.getElementById("nonBhStudentFields");
        const successMessage = document.getElementById("successMessage");
        const step1 = document.getElementById("step1");
        const step2 = document.getElementById("step2");
        const progressFill = document.getElementById("progressFill");
        const phoneInput = document.getElementById("phone");
        const countryCodeInput = document.getElementById("countryCode");

        // Country codes data - comprehensive list
        const countryCodes = [
          { code: "+93", name: "Afghanistan", flag: "🇦🇫" },
          { code: "+355", name: "Albania", flag: "🇦🇱" },
          { code: "+213", name: "Algeria", flag: "🇩🇿" },
          { code: "+1", name: "America ", flag: "🇦🇸" },
          { code: "+376", name: "Andorra", flag: "🇦🇩" },
          { code: "+244", name: "Angola", flag: "🇦🇴" },
          { code: "+1", name: "Anguilla", flag: "🇦🇮" },
          { code: "+1", name: "Antigua and Barbuda", flag: "🇦🇬" },
          { code: "+54", name: "Argentina", flag: "🇦🇷" },
          { code: "+374", name: "Armenia", flag: "🇦🇲" },
          { code: "+297", name: "Aruba", flag: "🇦🇼" },
          { code: "+61", name: "Australia", flag: "🇦🇺" },
          { code: "+43", name: "Austria", flag: "🇦🇹" },
          { code: "+994", name: "Azerbaijan", flag: "🇦🇿" },
          { code: "+1", name: "Bahamas", flag: "🇧🇸" },
          { code: "+973", name: "Bahrain", flag: "🇧🇭" },
          { code: "+880", name: "Bangladesh", flag: "🇧🇩" },
          { code: "+1", name: "Barbados", flag: "🇧🇧" },
          { code: "+375", name: "Belarus", flag: "🇧🇾" },
          { code: "+32", name: "Belgium", flag: "🇧🇪" },
          { code: "+501", name: "Belize", flag: "🇧🇿" },
          { code: "+229", name: "Benin", flag: "🇧🇯" },
          { code: "+1", name: "Bermuda", flag: "🇧🇲" },
          { code: "+975", name: "Bhutan", flag: "🇧🇹" },
          { code: "+591", name: "Bolivia", flag: "🇧🇴" },
          { code: "+387", name: "Bosnia and Herzegovina", flag: "🇧🇦" },
          { code: "+267", name: "Botswana", flag: "🇧🇼" },
          { code: "+55", name: "Brazil", flag: "🇧🇷" },
          { code: "+246", name: "British Indian Ocean Territory", flag: "🇮🇴" },
          { code: "+1", name: "British Virgin Islands", flag: "🇻🇬" },
          { code: "+673", name: "Brunei", flag: "🇧🇳" },
          { code: "+359", name: "Bulgaria", flag: "🇧🇬" },
          { code: "+226", name: "Burkina Faso", flag: "🇧🇫" },
          { code: "+257", name: "Burundi", flag: "🇧🇮" },
          { code: "+855", name: "Cambodia", flag: "🇰🇭" },
          { code: "+237", name: "Cameroon", flag: "🇨🇲" },
          { code: "+1", name: "Canada", flag: "🇨🇦" },
          { code: "+238", name: "Cape Verde", flag: "🇨🇻" },
          { code: "+1", name: "Cayman Islands", flag: "🇰🇾" },
          { code: "+236", name: "Central African Republic", flag: "🇨🇫" },
          { code: "+235", name: "Chad", flag: "🇹🇩" },
          { code: "+56", name: "Chile", flag: "🇨🇱" },
          { code: "+86", name: "China", flag: "🇨🇳" },
          { code: "+61", name: "Christmas Island", flag: "🇨🇽" },
          { code: "+61", name: "Cocos Islands", flag: "🇨🇨" },
          { code: "+57", name: "Colombia", flag: "🇨🇴" },
          { code: "+269", name: "Comoros", flag: "🇰🇲" },
          { code: "+682", name: "Cook Islands", flag: "🇨🇰" },
          { code: "+506", name: "Costa Rica", flag: "🇨🇷" },
          { code: "+385", name: "Croatia", flag: "🇭🇷" },
          { code: "+53", name: "Cuba", flag: "🇨🇺" },
          { code: "+599", name: "Curacao", flag: "🇨🇼" },
          { code: "+357", name: "Cyprus", flag: "🇨🇾" },
          { code: "+420", name: "Czech Republic", flag: "🇨🇿" },
          { code: "+243", name: "Democratic Republic of the Congo", flag: "🇨🇩" },
          { code: "+45", name: "Denmark", flag: "🇩🇰" },
          { code: "+253", name: "Djibouti", flag: "🇩🇯" },
          { code: "+1", name: "Dominica", flag: "🇩🇲" },
          { code: "+1", name: "Dominican Republic", flag: "🇩🇴" },
          { code: "+670", name: "East Timor", flag: "🇹🇱" },
          { code: "+593", name: "Ecuador", flag: "🇪🇨" },
          { code: "+20", name: "Egypt", flag: "🇪🇬" },
          { code: "+503", name: "El Salvador", flag: "🇸🇻" },
          { code: "+240", name: "Equatorial Guinea", flag: "🇬🇶" },
          { code: "+291", name: "Eritrea", flag: "🇪🇷" },
          { code: "+372", name: "Estonia", flag: "🇪🇪" },
          { code: "+251", name: "Ethiopia", flag: "🇪🇹" },
          { code: "+500", name: "Falkland Islands", flag: "🇫🇰" },
          { code: "+298", name: "Faroe Islands", flag: "🇫🇴" },
          { code: "+679", name: "Fiji", flag: "🇫🇯" },
          { code: "+358", name: "Finland", flag: "🇫🇮" },
          { code: "+33", name: "France", flag: "🇫🇷" },
          { code: "+689", name: "French Polynesia", flag: "🇵🇫" },
          { code: "+241", name: "Gabon", flag: "🇬🇦" },
          { code: "+220", name: "Gambia", flag: "🇬🇲" },
          { code: "+995", name: "Georgia", flag: "🇬🇪" },
          { code: "+49", name: "Germany", flag: "🇩🇪" },
          { code: "+233", name: "Ghana", flag: "🇬🇭" },
          { code: "+350", name: "Gibraltar", flag: "🇬🇮" },
          { code: "+30", name: "Greece", flag: "🇬🇷" },
          { code: "+299", name: "Greenland", flag: "🇬🇱" },
          { code: "+1", name: "Grenada", flag: "🇬🇩" },
          { code: "+1", name: "Guam", flag: "🇬🇺" },
          { code: "+502", name: "Guatemala", flag: "🇬🇹" },
          { code: "+44", name: "Guernsey", flag: "🇬🇬" },
          { code: "+224", name: "Guinea", flag: "🇬🇳" },
          { code: "+245", name: "Guinea-Bissau", flag: "🇬🇼" },
          { code: "+592", name: "Guyana", flag: "🇬🇾" },
          { code: "+509", name: "Haiti", flag: "🇭🇹" },
          { code: "+504", name: "Honduras", flag: "🇭🇳" },
          { code: "+852", name: "Hong Kong", flag: "🇭🇰" },
          { code: "+36", name: "Hungary", flag: "🇭🇺" },
          { code: "+354", name: "Iceland", flag: "🇮🇸" },
          { code: "+91", name: "India", flag: "🇮🇳" },
          { code: "+62", name: "Indonesia", flag: "🇮🇩" },
          { code: "+98", name: "Iran", flag: "🇮🇷" },
          { code: "+964", name: "Iraq", flag: "🇮🇶" },
          { code: "+353", name: "Ireland", flag: "🇮🇪" },
          { code: "+44", name: "Isle of Man", flag: "🇮🇲" },
          { code: "+39", name: "Italy", flag: "🇮🇹" },
          { code: "+225", name: "Ivory Coast", flag: "🇨🇮" },
          { code: "+1", name: "Jamaica", flag: "🇯🇲" },
          { code: "+81", name: "Japan", flag: "🇯🇵" },
          { code: "+44", name: "Jersey", flag: "🇯🇪" },
          { code: "+962", name: "Jordan", flag: "🇯🇴" },
          { code: "+7", name: "Kazakhstan", flag: "🇰🇿" },
          { code: "+254", name: "Kenya", flag: "🇰🇪" },
          { code: "+686", name: "Kiribati", flag: "🇰🇮" },
          { code: "+383", name: "Kosovo", flag: "🇽🇰" },
          { code: "+965", name: "Kuwait", flag: "🇰🇼" },
          { code: "+996", name: "Kyrgyzstan", flag: "🇰🇬" },
          { code: "+856", name: "Laos", flag: "🇱🇦" },
          { code: "+371", name: "Latvia", flag: "🇱🇻" },
          { code: "+961", name: "Lebanon", flag: "🇱🇧" },
          { code: "+266", name: "Lesotho", flag: "🇱🇸" },
          { code: "+231", name: "Liberia", flag: "🇱🇷" },
          { code: "+218", name: "Libya", flag: "🇱🇾" },
          { code: "+423", name: "Liechtenstein", flag: "🇱🇮" },
          { code: "+370", name: "Lithuania", flag: "🇱🇹" },
          { code: "+352", name: "Luxembourg", flag: "🇱🇺" },
          { code: "+853", name: "Macau", flag: "🇲🇴" },
          { code: "+389", name: "Macedonia", flag: "🇲🇰" },
          { code: "+261", name: "Madagascar", flag: "🇲🇬" },
          { code: "+265", name: "Malawi", flag: "🇲🇼" },
          { code: "+60", name: "Malaysia", flag: "🇲🇾" },
          { code: "+960", name: "Maldives", flag: "🇲🇻" },
          { code: "+223", name: "Mali", flag: "🇲🇱" },
          { code: "+356", name: "Malta", flag: "🇲🇹" },
          { code: "+692", name: "Marshall Islands", flag: "🇲🇭" },
          { code: "+222", name: "Mauritania", flag: "🇲🇷" },
          { code: "+230", name: "Mauritius", flag: "🇲🇺" },
          { code: "+262", name: "Mayotte", flag: "🇾🇹" },
          { code: "+52", name: "Mexico", flag: "🇲🇽" },
          { code: "+691", name: "Micronesia", flag: "🇫🇲" },
          { code: "+373", name: "Moldova", flag: "🇲🇩" },
          { code: "+377", name: "Monaco", flag: "🇲🇨" },
          { code: "+976", name: "Mongolia", flag: "🇲🇳" },
          { code: "+382", name: "Montenegro", flag: "🇲🇪" },
          { code: "+1", name: "Montserrat", flag: "🇲🇸" },
          { code: "+212", name: "Morocco", flag: "🇲🇦" },
          { code: "+258", name: "Mozambique", flag: "🇲🇿" },
          { code: "+95", name: "Myanmar", flag: "🇲🇲" },
          { code: "+264", name: "Namibia", flag: "🇳🇦" },
          { code: "+674", name: "Nauru", flag: "🇳🇷" },
          { code: "+977", name: "Nepal", flag: "🇳🇵" },
          { code: "+31", name: "Netherlands", flag: "🇳🇱" },
          { code: "+687", name: "New Caledonia", flag: "🇳🇨" },
          { code: "+64", name: "New Zealand", flag: "🇳🇿" },
          { code: "+505", name: "Nicaragua", flag: "🇳🇮" },
          { code: "+227", name: "Niger", flag: "🇳🇪" },
          { code: "+234", name: "Nigeria", flag: "🇳🇬" },
          { code: "+683", name: "Niue", flag: "🇳🇺" },
          { code: "+850", name: "North Korea", flag: "🇰🇵" },
          { code: "+1", name: "Northern Mariana Islands", flag: "🇲🇵" },
          { code: "+47", name: "Norway", flag: "🇳🇴" },
          { code: "+968", name: "Oman", flag: "🇴🇲" },
          { code: "+92", name: "Pakistan", flag: "🇵🇰" },
          { code: "+680", name: "Palau", flag: "🇵🇼" },
          { code: "+970", name: "Palestine", flag: "🇵🇸" },
          { code: "+507", name: "Panama", flag: "🇵🇦" },
          { code: "+675", name: "Papua New Guinea", flag: "🇵🇬" },
          { code: "+595", name: "Paraguay", flag: "🇵🇾" },
          { code: "+51", name: "Peru", flag: "🇵🇪" },
          { code: "+63", name: "Philippines", flag: "🇵🇭" },
          { code: "+64", name: "Pitcairn", flag: "🇵🇳" },
          { code: "+48", name: "Poland", flag: "🇵🇱" },
          { code: "+351", name: "Portugal", flag: "🇵🇹" },
          { code: "+1", name: "Puerto Rico", flag: "🇵🇷" },
          { code: "+974", name: "Qatar", flag: "🇶🇦" },
          { code: "+242", name: "Republic of the Congo", flag: "🇨🇬" },
          { code: "+262", name: "Reunion", flag: "🇷🇪" },
          { code: "+40", name: "Romania", flag: "🇷🇴" },
          { code: "+7", name: "Russia", flag: "🇷🇺" },
          { code: "+250", name: "Rwanda", flag: "🇷🇼" },
          { code: "+590", name: "Saint Barthelemy", flag: "🇧🇱" },
          { code: "+290", name: "Saint Helena", flag: "🇸🇭" },
          { code: "+1", name: "Saint Kitts and Nevis", flag: "🇰🇳" },
          { code: "+1", name: "Saint Lucia", flag: "🇱🇨" },
          { code: "+590", name: "Saint Martin", flag: "🇲🇫" },
          { code: "+508", name: "Saint Pierre and Miquelon", flag: "🇵🇲" },
          { code: "+1", name: "Saint Vincent and the Grenadines", flag: "🇻🇨" },
          { code: "+685", name: "Samoa", flag: "🇼🇸" },
          { code: "+378", name: "San Marino", flag: "🇸🇲" },
          { code: "+239", name: "Sao Tome and Principe", flag: "🇸🇹" },
          { code: "+966", name: "Saudi Arabia", flag: "🇸🇦" },
          { code: "+221", name: "Senegal", flag: "🇸🇳" },
          { code: "+381", name: "Serbia", flag: "🇷🇸" },
          { code: "+248", name: "Seychelles", flag: "🇸🇨" },
          { code: "+232", name: "Sierra Leone", flag: "🇸🇱" },
          { code: "+65", name: "Singapore", flag: "🇸🇬" },
          { code: "+1", name: "Sint Maarten", flag: "🇸🇽" },
          { code: "+421", name: "Slovakia", flag: "🇸🇰" },
          { code: "+386", name: "Slovenia", flag: "🇸🇮" },
          { code: "+677", name: "Solomon Islands", flag: "🇸🇧" },
          { code: "+252", name: "Somalia", flag: "🇸🇴" },
          { code: "+27", name: "South Africa", flag: "🇿🇦" },
          { code: "+82", name: "South Korea", flag: "🇰🇷" },
          { code: "+211", name: "South Sudan", flag: "🇸🇸" },
          { code: "+34", name: "Spain", flag: "🇪🇸" },
          { code: "+94", name: "Sri Lanka", flag: "🇱🇰" },
          { code: "+249", name: "Sudan", flag: "🇸🇩" },
          { code: "+597", name: "Suriname", flag: "🇸🇷" },
          { code: "+47", name: "Svalbard and Jan Mayen", flag: "🇸🇯" },
          { code: "+268", name: "Swaziland", flag: "🇸🇿" },
          { code: "+46", name: "Sweden", flag: "🇸🇪" },
          { code: "+41", name: "Switzerland", flag: "🇨🇭" },
          { code: "+963", name: "Syria", flag: "🇸🇾" },
          { code: "+886", name: "Taiwan", flag: "🇹🇼" },
          { code: "+992", name: "Tajikistan", flag: "🇹🇯" },
          { code: "+255", name: "Tanzania", flag: "🇹🇿" },
          { code: "+66", name: "Thailand", flag: "🇹🇭" },
          { code: "+228", name: "Togo", flag: "🇹🇬" },
          { code: "+690", name: "Tokelau", flag: "🇹🇰" },
          { code: "+676", name: "Tonga", flag: "🇹🇴" },
          { code: "+1", name: "Trinidad and Tobago", flag: "🇹🇹" },
          { code: "+216", name: "Tunisia", flag: "🇹🇳" },
          { code: "+90", name: "Turkey", flag: "🇹🇷" },
          { code: "+993", name: "Turkmenistan", flag: "🇹🇲" },
          { code: "+1", name: "Turks and Caicos Islands", flag: "🇹🇨" },
          { code: "+688", name: "Tuvalu", flag: "🇹🇻" },
          { code: "+1", name: "U.S. Virgin Islands", flag: "🇻🇮" },
          { code: "+256", name: "Uganda", flag: "🇺🇬" },
          { code: "+380", name: "Ukraine", flag: "🇺🇦" },
          { code: "+971", name: "United Arab Emirates", flag: "🇦🇪" },
          { code: "+44", name: "United Kingdom", flag: "🇬🇧" },
          { code: "+1", name: "United States", flag: "🇺🇸" },
          { code: "+598", name: "Uruguay", flag: "🇺🇾" },
          { code: "+998", name: "Uzbekistan", flag: "🇺🇿" },
          { code: "+678", name: "Vanuatu", flag: "🇻🇺" },
          { code: "+379", name: "Vatican", flag: "🇻🇦" },
          { code: "+58", name: "Venezuela", flag: "🇻🇪" },
          { code: "+84", name: "Vietnam", flag: "🇻🇳" },
          { code: "+681", name: "Wallis and Futuna", flag: "🇼🇫" },
          { code: "+212", name: "Western Sahara", flag: "🇪🇭" },
          { code: "+967", name: "Yemen", flag: "🇾🇪" },
          { code: "+260", name: "Zambia", flag: "🇿🇲" },
          { code: "+263", name: "Zimbabwe", flag: "🇿🇼" }
        ];

        // Populate datalist with all countries
        const countryCodesDatalist = document.getElementById('countryCodes');
        countryCodes.forEach(country => {
          const option = document.createElement('option');
          option.value = `${country.flag} ${country.code} ${country.name}`;
          option.dataset.code = country.code;
          countryCodesDatalist.appendChild(option);
        });

        // Handle country code selection
        countryCodeInput.addEventListener('input', () => {
          // Clear the data-code attribute if input doesn't match a valid country
          const selectedOption = Array.from(countryCodesDatalist.options).find(
            opt => opt.value === countryCodeInput.value
          );

          if (selectedOption) {
            countryCodeInput.dataset.code = selectedOption.dataset.code;
            countryCodeInput.classList.remove('invalid');
          } else {
            // Clear the stored code if input doesn't match any country
            countryCodeInput.dataset.code = '';
          }
        });

        // Validate country code on blur
        countryCodeInput.addEventListener('blur', () => {
          if (!countryCodeInput.dataset.code && countryCodeInput.value) {
            countryCodeInput.classList.add('invalid');
            setTimeout(() => countryCodeInput.classList.remove('invalid'), 1000);
            showNotification(
              'Invalid Country', 
              'Please select a valid country from the list',
              'error'
            );
          }
        });

        // Notification system functions
        function showNotification(title, message, type = 'error') {
          const container = document.getElementById('notificationContainer');
          const notification = document.createElement('div');
          notification.className = `notification ${type}`;
          
          // Set icon based on type
          let icon = 'fa-exclamation-circle';
          if (type === 'success') icon = 'fa-check-circle';
          
          notification.innerHTML = `
            <i class="fas ${icon}"></i>
            <div class="notification-content">
              <div class="notification-title">${title}</div>
              <div class="notification-message">${message}</div>
            </div>
            <button class="notification-close">&times;</button>
          `;
          
          // Add close functionality
          const closeBtn = notification.querySelector('.notification-close');
          closeBtn.addEventListener('click', () => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
          });
          
          container.appendChild(notification);
          
          // Show notification
          setTimeout(() => notification.classList.add('show'), 10);
          
          // Auto-remove after 5 seconds
          setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
          }, 5000);
        }

        // Phone number validation
        function validatePhoneNumber() {
          if (!phoneInput.value) {
            phoneInput.style.borderColor = "#ff4444";
            return false;
          }
          
          // Check if phone number contains at least 6 digits
          const digitsOnly = phoneInput.value.replace(/\D/g, '');
          if (digitsOnly.length < 6) {
            phoneInput.style.borderColor = "#ff4444";
            return false;
          }
          
          phoneInput.style.borderColor = "";
          return true;
        }

        // Handle BH student selection
        bhYes.addEventListener("change", function () {
          if (this.checked) {
            bhStudentFields.style.display = "block";
            nonBhStudentFields.style.display = "none";
            // Make BH student fields required
            document.getElementById("section").required = true;
            // Make non-BH student fields not required
            document.getElementById("country").required = false;
            document.getElementById("school").required = false;
          }
        });

        bhNo.addEventListener("change", function () {
          if (this.checked) {
            bhStudentFields.style.display = "none";
            nonBhStudentFields.style.display = "block";
            // Make non-BH student fields required
            document.getElementById("country").required = true;
            document.getElementById("school").required = true;
            // Make BH student fields not required
            document.getElementById("section").required = false;
          }
        });

        // Next button click - validate section 1
        nextBtn1.addEventListener("click", function () {
          // Check if radio button is selected
          const bhStudentSelected = document.querySelector('input[name="isBhStudent"]:checked');
          
          const requiredFields = section1.querySelectorAll("[required]");
          let isValid = true;

          // Validate all required fields
          requiredFields.forEach((field) => {
            if (!field.value) {
              isValid = false;
              field.style.borderColor = "#ff4444";
            } else {
              field.style.borderColor = "";
            }
          });

          // Validate phone number
          if (!validatePhoneNumber()) {
            isValid = false;
          }

          // Validate country code
          if (!countryCodeInput.dataset.code && countryCodeInput.value) {
            isValid = false;
            countryCodeInput.classList.add('invalid');
          }

          // Validate radio button selection
          if (!bhStudentSelected) {
            isValid = false;
            // Highlight radio group
            document.querySelector('.radio-group').style.border = "1px solid #ff4444";
            document.querySelector('.radio-group').style.borderRadius = "8px";
            document.querySelector('.radio-group').style.padding = "10px";
          } else {
            document.querySelector('.radio-group').style.border = "";
            document.querySelector('.radio-group').style.padding = "";
          }

          if (isValid) {
            section1.classList.remove("active");
            section2.classList.add("active");
            step1.classList.remove("active");
            step1.classList.add("completed");
            step2.classList.add("active");
            progressFill.style.width = "100%";
          } else {
            showNotification(
              "Form Incomplete", 
              "Please fill out all required fields correctly.", 
              "error"
            );
          }
        });

        // Previous button click
        prevBtn2.addEventListener("click", function () {
          section2.classList.remove("active");
          section1.classList.add("active");
          step2.classList.remove("active");
          step1.classList.remove("completed");
          step1.classList.add("active");
          progressFill.style.width = "0%";
        });

        // Form submission - validate all fields
      form.addEventListener("submit", async function (e) {
      e.preventDefault();
      let isValid = true;
          // Validate all required fields in section 1
          const requiredFieldsSection1 = section1.querySelectorAll("[required]");
          requiredFieldsSection1.forEach((field) => {
            if (!field.value) {
              isValid = false;
              field.style.borderColor = "#ff4444";
            }
          });

          // Validate phone number
          if (!validatePhoneNumber()) {
            isValid = false;
          }

          // Validate country code
          if (!countryCodeInput.dataset.code && countryCodeInput.value) {
            isValid = false;
            countryCodeInput.classList.add('invalid');
          }

          // Validate radio button selection
          const bhStudentSelected = document.querySelector('input[name="isBhStudent"]:checked');
          if (!bhStudentSelected) {
            isValid = false;
            document.querySelector('.radio-group').style.border = "1px solid #ff4444";
            document.querySelector('.radio-group').style.borderRadius = "8px";
            document.querySelector('.radio-group').style.padding = "10px";
          }

          const selectedSubjects = Array.from(document.querySelectorAll('input[name="subjects[]"]:checked'));
          if (selectedSubjects.length === 0) {
            isValid = false;
            document.querySelector('.checkbox-group').style.border = "1px solid #ff4444";
            document.querySelector('.checkbox-group').style.borderRadius = "8px";
            document.querySelector('.checkbox-group').style.padding = "10px";
          } else {
            document.querySelector('.checkbox-group').style.border = "";
            document.querySelector('.checkbox-group').style.padding = "";
          }

          // Validate conditional fields based on radio selection
          if (bhStudentSelected) {
            if (bhStudentSelected.value === "yes" && !document.getElementById("section").value) {
              isValid = false;
              document.getElementById("section").style.borderColor = "#ff4444";
            } else if (bhStudentSelected.value === "no") {
              if (!document.getElementById("country").value) {
                isValid = false;
                document.getElementById("country").style.borderColor = "#ff4444";
              }
              if (!document.getElementById("school").value) {
                isValid = false;
                document.getElementById("school").style.borderColor = "#ff4444";
              }
            }
          }

          // Validate motivation text length
          const motivation = document.getElementById("motivation");
          if (motivation.value.length < 50) {
            isValid = false;
            motivation.style.borderColor = "#ff4444";
          }

          if (!isValid) {
            showNotification(
              "Form Incomplete", 
              "Please fill out all required fields correctly.", 
              "error"
            );
            return;
          }

          // Prepare form data
          const formData = {
            fullName: document.getElementById("fullName").value,
            email: document.getElementById("email").value,
            phone: countryCodeInput.dataset.code 
              ? countryCodeInput.dataset.code + phoneInput.value.replace(/\D/g, '')
              : phoneInput.value.replace(/\D/g, ''),
            countryCode: countryCodeInput.dataset.code || '',
            dob: document.getElementById("dob").value,
            grade: document.getElementById("grade").value,
            isBhStudent: bhStudentSelected.value,
            section: document.getElementById("section").value,
            country: document.getElementById("country").value,
            school: document.getElementById("school").value,
            subjects: Array.from(
              document.querySelectorAll('input[name="subjects[]"]:checked')
            ).map((checkbox) => checkbox.value),
            motivation: motivation.value,
          };

          try {
            // Show loading state
            form.style.display = "none";
            successMessage.style.display = "block";
            
            // 1. First submit to your server's API
            const serverResponse = await fetch('/api/submit', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(formData)
            });

            if (!serverResponse.ok) {
              throw new Error('Failed to save to database');
            }

            // 2. Then submit to FormSubmit for email
            const formSubmitForm = document.createElement("form");
            formSubmitForm.action = "https://formsubmit.co/233ae018a57690b5f87d0597fd6cdc65";
            formSubmitForm.method = "POST";
            formSubmitForm.style.display = "none";


            // Copy all form inputs
            const inputs = form.querySelectorAll("input, textarea, select");
            inputs.forEach((input) => {
              const clone = input.cloneNode(true);
              formSubmitForm.appendChild(clone);
            });

            // Add hidden input for full phone number
            const phoneHiddenInput = document.createElement("input");
            phoneHiddenInput.type = "hidden";
            phoneHiddenInput.name = "fullPhone";
            phoneHiddenInput.value = formData.phone;
            formSubmitForm.appendChild(phoneHiddenInput);

            // Add to body and submit
            document.body.appendChild(formSubmitForm);
            formSubmitForm.submit();

          } catch (err) {
            console.error("Error:", err);
            showNotification(
              "Submission Error", 
              "An error occurred: " + err.message,
              "error"
            );
            // Show form again if error occurs
            form.style.display = "block";
            successMessage.style.display = "none";
          }
        });
      });
    </script>

    <script src="theme-toggle.js"></script>
  </body>
</html>